/*!
* jQuery appendGrid v2.0.0-pre
* https://appendgrid.apphb.com/
*
* Copyright 2018 Albert L.
* Dual licensed under the LGPL (http://www.gnu.org/licenses/lgpl.html)
* and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.
*
* Depends:
* jQuery v3.1.0+
*/
!function(e){function t(e,t){var n=null;return 1==e.length?(n=e.data("appendGrid"))||t||alert(x.notInit):t||alert(x.getValueMultiGrid),n}function n(t,n,o,i){var a,u,s,d,p=e(t).data("appendGrid"),f=[],h=null,_=[],C=(t.getElementsByTagName("thead")[0],t.getElementsByTagName("tbody")[0]),g=null,y=!1,x=!1,O=0,R=0;p.maxBodyHeight>0&&e("#"+p._wrapperId+" table thead")[0];var B=n,P=!1;if(e.isArray(n)&&(B=n.length,P=!0),e.isNumeric(i)){for(N=0;N<p._rowOrder.length;N++)if(p._rowOrder[N]==i){o=N,0!=N&&(h=N-1);break}}else e.isNumeric(o)?o>=p._rowOrder.length?o=null:h=o-1:0!=p._rowOrder.length&&(o=null,h=p._rowOrder.length-1);p.maintainScroll&&!e.isNumeric(o)&&(O=e(t).height(),R=e(t).scrollParent().scrollTop()),0==p._rowOrder.length&&(e("tr.empty",t).remove(),x=!0);for(var N=0;N<B;N++){if(0<p.maxRowsAllowed&&p._rowOrder.length>=p.maxRowsAllowed){y=!0;break}p._uniqueIndex++,a=p._uniqueIndex,_.length=0,e.isNumeric(o)?(p._rowOrder.splice(o,0,a),p.useSubPanel?(C.insertBefore(g=document.createElement("tr"),C.childNodes[2*o]),C.insertBefore(s=document.createElement("tr"),C.childNodes[2*o])):C.insertBefore(s=document.createElement("tr"),C.childNodes[o]),f.push(o)):(p._rowOrder.push(a),C.appendChild(s=document.createElement("tr")),p.useSubPanel&&C.appendChild(g=document.createElement("tr")),f.push(p._rowOrder.length-1)),s.id=p.idPrefix+"_Row_"+a,p._sectionClasses.body&&(s.className=p._sectionClasses.body),e(s).data("appendGrid",a),null!=g&&(g.id=p.idPrefix+"_SubRow_"+a,e(g).data("appendGrid",a),p._sectionClasses.subPanel&&(g.className=p._sectionClasses.subPanel)),p.hideRowNumColumn||(s.appendChild(d=document.createElement("td")),e(d).addClass("first").text(p._rowOrder.length),p.useSubPanel&&(d.rowSpan=2));for(var G="form-control"+(p.useSmallTable?" form-control-sm":""),I=0;I<p.columns.length;I++)if("hidden"!=p.columns[I].type){s.appendChild(d=document.createElement("td")),d.id=p.idPrefix+"_"+p.columns[I].name+"_td_"+a,p.columns[I].invisible&&(d.className="invisible"),null!=p.columns[I].cellCss&&e(d).css(p.columns[I].cellCss);var S,E=p.idPrefix+"_"+p.columns[I].name+"_"+a;if(S=e.isFunction(p.nameFormatter)?p.nameFormatter(p.idPrefix,p.columns[I].name,a):E,u=null,"custom"==p.columns[I].type)e.isFunction(p.columns[I].customBuilder)&&(u=p.columns[I].customBuilder(d,p.idPrefix,p.columns[I].name,a));else if("select"==p.columns[I].type||"ui-selectmenu"==p.columns[I].type){if(u=document.createElement("select"),u.id=E,u.name=S,u.className=G,e.isArray(p.columns[I].ctrlOptions)){if(p.columns[I].ctrlOptions.length>0)if(e.isPlainObject(p.columns[I].ctrlOptions[0]))for(var F=null,D=null,k=0;k<p.columns[I].ctrlOptions.length;k++){c(p.columns[I].ctrlOptions[k].group)?D=null:F!=p.columns[I].ctrlOptions[k].group&&(F=p.columns[I].ctrlOptions[k].group,(D=document.createElement("optgroup")).label=F,u.appendChild(D));var T=e("<option/>").val(p.columns[I].ctrlOptions[k].value).text(p.columns[I].ctrlOptions[k].label);c(p.columns[I].ctrlOptions[k].title)||T.attr("title",p.columns[I].ctrlOptions[k].title),null==D?T.appendTo(u):T.appendTo(D)}else for(k=0;k<p.columns[I].ctrlOptions.length;k++)u.options[u.options.length]=new Option(p.columns[I].ctrlOptions[k],p.columns[I].ctrlOptions[k])}else if(e.isPlainObject(p.columns[I].ctrlOptions))for(var k in p.columns[I].ctrlOptions)u.options[u.options.length]=new Option(p.columns[I].ctrlOptions[k],k);else if("string"==typeof p.columns[I].ctrlOptions)for(var L=p.columns[I].ctrlOptions.split(";"),k=0;k<L.length;k++){var A=L[k].indexOf(":");u.options[u.options.length]=-1==A?new Option(L[k],L[k]):new Option(L[k].substring(A+1,L[k].length),L[k].substring(0,A))}else e.isFunction(p.columns[I].ctrlOptions)&&p.columns[I].ctrlOptions(u);d.appendChild(u)}else if("checkbox"==p.columns[I].type)(u=document.createElement("input")).type="checkbox",u.id=E,u.name=S,u.className=G,u.value=1,d.appendChild(u),d.style.textAlign="center";else if("textarea"==p.columns[I].type)(u=document.createElement("textarea")).id=E,u.name=S,u.className=G,d.appendChild(u);else if(-1!=p.columns[I].type.search(/^(color|date|datetime|datetime\-local|email|month|number|range|search|tel|time|url|week)$/)){u=document.createElement("input");try{u.type=p.columns[I].type}catch(e){}u.id=E,u.name=S,u.className=G,d.appendChild(u)}else(u=document.createElement("input")).type="text",u.id=E,u.name=S,u.className=G,d.appendChild(u);"custom"!=p.columns[I].type&&(null!=p.columns[I].ctrlAttr&&e(u).attr(p.columns[I].ctrlAttr),null!=p.columns[I].ctrlProp&&e(u).prop(p.columns[I].ctrlProp),null!=p.columns[I].ctrlCss&&e(u).css(p.columns[I].ctrlCss),null!=p.columns[I].ctrlClass&&e(u).addClass(p.columns[I].ctrlClass),p.columns[I].uiTooltip&&e(u).tooltip(p.columns[I].uiTooltip),e.isFunction(p.columns[I].onClick)&&e(u).click({caller:t,callback:p.columns[I].onClick,uniqueIndex:a},function(t){t.data.callback(t,e(t.data.caller).appendGrid("getRowIndex",t.data.uniqueIndex))}),e.isFunction(p.columns[I].onChange)&&e(u).change({caller:t,callback:p.columns[I].onChange,uniqueIndex:a},function(t){t.data.callback(t,e(t.data.caller).appendGrid("getRowIndex",t.data.uniqueIndex))})),P?w(p,I,a,n[N][p.columns[I].name]):c(p.columns[I].value)||w(p,I,a,p.columns[I].value)}else _.push(I);if(!p._hideLastColumn||p.columns.length>p._visibleCount){p.rowButtonsInFront?p.hideRowNumColumn?s.insertBefore(d=document.createElement("td"),s.firstChild):s.insertBefore(d=document.createElement("td"),s.childNodes[1]):s.appendChild(d=document.createElement("td")),d.className="last",d.id=p.idPrefix+"_last_td_"+a,p._hideLastColumn&&(d.style.display="none");var q=document.createElement("div");q.className="btn-group"+(p.useSmallTable?" btn-group-sm":""),d.appendChild(q),p.hideButtons.insert||v(p,"insert").data("appendGrid",{uniqueIndex:a}).attr({id:p.idPrefix+"_Insert_"+a}).on("click",function(n){var o=e(this).data("appendGrid").uniqueIndex;return e(t).appendGrid("insertRow",1,null,o),n&&n.preventDefault&&n.preventDefault(p._buttonClasses.insert),!1}).appendTo(q),p.hideButtons.remove||v(p,"remove").data("appendGrid",{uniqueIndex:a}).attr({id:p.idPrefix+"_Delete_"+a}).on("click",function(n){var o=e(this).data("appendGrid").uniqueIndex;return r(t,null,o,!1),n&&n.preventDefault&&n.preventDefault(),!1}).appendTo(q),p.hideButtons.moveUp||v(p,"moveUp").data("appendGrid",{uniqueIndex:a}).attr({id:p.idPrefix+"_MoveUp_"+a}).on("click",function(n){var o=e(this).data("appendGrid").uniqueIndex;return e(t).appendGrid("moveUpRow",null,o),n&&n.preventDefault&&n.preventDefault(),!1}).appendTo(q),p.hideButtons.moveDown||v(p,"moveDown").data("appendGrid",{uniqueIndex:a}).attr({id:p.idPrefix+"_MoveDown_"+a}).on("click",function(n){var o=e(this).data("appendGrid").uniqueIndex;return e(t).appendGrid("moveDownRow",null,o),n&&n.preventDefault&&n.preventDefault(),!1}).appendTo(q);for(I=0;I<_.length;I++)(u=document.createElement("input")).id=p.idPrefix+"_"+p.columns[_[I]].name+"_"+a,e.isFunction(p.nameFormatter)?u.name=p.nameFormatter(p.idPrefix,p.columns[I].name,a):u.name=u.id,u.type="hidden",P?u.value=n[N][p.columns[_[I]].name]:c(p.columns[_[I]].value)||(u.value=p.columns[_[I]].value),d.appendChild(u);if(p.customRowButtons&&p.customRowButtons.length){for(I=p.customRowButtons.length-1;I>=0;I--)(U=p.customRowButtons[I])&&U.uiButton&&U.click&&U.atTheFront&&e(q).prepend(l(t,U,a));for(I=0;I<p.customRowButtons.length;I++){var U=p.customRowButtons[I];U&&U.uiButton&&U.click&&!U.atTheFront&&e(q).append(l(t,U,a))}}}}if(m(t,p),x&&p.autoColumnWidth&&p.maxBodyHeight>0&&b(document.getElementById(p._wrapperId)),e.isNumeric(o)?e.isFunction(p.afterRowInserted)&&p.afterRowInserted(t,h,f):e.isFunction(p.afterRowAppended)&&p.afterRowAppended(t,h,f),y&&e.isFunction(p.maxNumRowsReached)&&p.maxNumRowsReached(),p.maintainScroll&&!e.isNumeric(o)){var $=e(t).height();e(t).scrollParent().scrollTop(R+$-O)}return{addedRows:f,parentIndex:h,rowIndex:o}}function o(t,n){var o=e("<button/>").attr({type:"button",tabindex:-1}).button(n.uiButton).click({tbWhole:t},n.click);return n.btnClass&&o.addClass(n.btnClass),n.btnCss&&o.css(n.btnCss),n.btnAttr&&o.attr(n.btnAttr),o}function l(t,n,o){var l=e("<button/>").val(o).attr({type:"button",tabindex:-1}).button(n.uiButton).click({tbWhole:t,uniqueIndex:o},function(t){var o=e(t.data.tbWhole).appendGrid("getRowValue",null,t.data.uniqueIndex);n.click(t,t.data.uniqueIndex,o)});return n.btnClass&&l.addClass(n.btnClass),n.btnCss&&l.css(n.btnCss),n.btnAttr&&l.attr(n.btnAttr),l}function r(t,n,o,l){var r=e(t).data("appendGrid"),a=t.getElementsByTagName("tbody")[0];if(e.isNumeric(o))for(var s=0;s<r._rowOrder.length;s++)if(r._rowOrder[s]==o){n=s;break}if(e.isNumeric(n))(l||"function"!=typeof r.beforeRowRemove||r.beforeRowRemove(t,n))&&(r._rowOrder.splice(n,1),r.useSubPanel?(a.removeChild(a.childNodes[2*n]),a.removeChild(a.childNodes[2*n])):a.removeChild(a.childNodes[n]),m(t,r),u(t,n),e.isFunction(r.afterRowRemoved)&&r.afterRowRemoved(t,n));else{var d=0,c=0;if(r.maintainScroll&&(d=e(t).height(),c=e(t).scrollParent().scrollTop()),(l||!e.isFunction(r.beforeRowRemove)||r.beforeRowRemove(t,r._rowOrder.length-1))&&(o=r._rowOrder.pop(),a.removeChild(a.lastChild),r.useSubPanel&&a.removeChild(a.lastChild),m(t,r),e.isFunction(r.afterRowRemoved)&&r.afterRowRemoved(t,null)),r.maintainScroll){var p=e(t).height();e(t).scrollParent().scrollTop(c+p-d)}}0==r._rowOrder.length&&i(document.getElementById(r._wrapperId),r)}function i(t,n,o){var l=e("<td></td>").text(n._i18n.rowEmpty).attr("colspan",n._finalColSpan);e("table.body tbody",t).append(e("<tr></tr>").addClass("empty").append(l)),!o&&n.maxBodyHeight>0&&(n.autoColumnWidth?b(t):l.width(e("table.head",t).width()-4))}function a(t){var n=e(t).data("appendGrid");e("tbody",t).empty(),n._rowOrder.length=0,n._uniqueIndex=0,m(t,n),i(document.getElementById(n._wrapperId),n)}function u(t,n){var o=e(t).data("appendGrid");if(!o.hideRowNumColumn)for(var l=n;l<o._rowOrder.length;l++)e("#"+o.idPrefix+"_Row_"+o._rowOrder[l]+" td.first",t).text(l+1)}function s(t,o,l){var r,i,a=e(t).data("appendGrid");if(a){if(r=t.getElementsByTagName("tbody")[0],e(r).empty(),a._rowOrder.length=0,a._uniqueIndex=0,null!=o&&o.length){i=n(t,o.length,null,null);for(var u=0;u<i.addedRows.length;u++){for(var s=0;s<a.columns.length;s++)w(a,s,a._rowOrder[u],o[u][a.columns[s].name]);e.isFunction(a.rowDataLoaded)&&a.rowDataLoaded(t,o[u],u,a._rowOrder[u])}}a._isDataLoaded=!0,l&&(a.initData=null),e(t).data("appendGrid",a),e.isFunction(a.dataLoaded)&&a.dataLoaded(t,o)}}function d(e,t){for(var n=0;n<t._rowOrder.length;n++)if(t._rowOrder[n]==e)return n;return null}function c(e){return void 0===e||null==e}function m(t,n){e(t).data("appendGrid",n),e("#"+n.idPrefix+"_rowOrder",t).val(n._rowOrder.join())}function p(t,n,o){for(var l={},r=c(o)?"":"_"+o,i=0;i<t.columns.length;i++)l[t.columns[i].name+r]=f(t,i,n);if(t.useSubPanel&&e.isFunction(t.subPanelGetter)){var a=t.subPanelGetter(n);if(e.isPlainObject(a))if(""==r)e.extend(l,a);else{var u={};for(var s in a)u[s+r]=a[s];e.extend(l,u)}}return l}function f(t,n,o){var l=t.columns[n].type,r=t.columns[n].name;if("custom"==l)return e.isFunction(t.columns[n].customGetter)?t.columns[n].customGetter(t.idPrefix,r,o):null;var i=h(l,t.idPrefix,r,o);return null==i?null:"checkbox"==l?i.checked?1:0:e(i).val()}function h(e,t,n,o){return document.getElementById(t+"_"+n+"_"+o)}function w(t,n,o,l){var r=t.columns[n].type,i=t.columns[n].name;if("custom"==r)e.isFunction(t.columns[n].customSetter)&&t.columns[n].customSetter(t.idPrefix,i,o,l);else{var a=h(r,t.idPrefix,i,o);"checkbox"==r?a.checked=null!=l&&0!=l:"ui-selectmenu"==r?(a.value=null==l?"":l,e(a).selectmenu("refresh")):e(a).val(null==l?"":l)}}function v(t,n){var o=null,l=null;return t.customGridButtons&&(l=t.customGridButtons[n])&&(e.isFunction(l)?o=l():l.nodeType?o=e(l).clone():"string"==typeof l&&"<"==l.charAt(0)&&(o=e(l))),o||(o=e.fn.appendGrid._fw.builders.button(n,l)),o&&(o.attr({title:t._i18n[n],tabindex:-1}).addClass(n),t._buttonClasses&&t._buttonClasses[n]&&o.addClass(t._buttonClasses[n])),o}function _(t,n){for(var o=0;o<t.columns.length;o++){var l=t._rowOrder[n],r=f(t,o,l);if(e.isFunction(t.columns[o].emptyCriteria)){if(!t.columns[o].emptyCriteria(r))return!1}else{var i=null;if(c(t.columns[o].emptyCriteria))if("checkbox"==t.columns[o].type)i=0;else if("select"==t.columns[o].type||"ui-selectmenu"==t.columns[o].type){var a=h(t.columns[o].type,t.idPrefix,t.columns[o].name,l).options;i=a.length>0?a[0].value:""}else i="";else i=t.columns[o].emptyCriteria;if(r!=i)return!1}}return!0}function b(t){var n=e("table.body",t),o=e("div.scroller",t),l=n.data("appendGrid"),r=e("table.head tr.columnHead",t)[0],i=e("table.body colgroup",t)[0];if(l._rowOrder.length>0){e("td",r).width("auto"),e("col",i).width("auto"),n.width("auto"),o.width("auto");var a=e("tbody tr",n)[0],u=-2;e.fn.modal&&(u=1);for(var s=Math.min(r.childNodes.length,a.childNodes.length),d=0;d<s;d++){var c=r.childNodes[d].clientWidth+1,m=a.childNodes[d].clientWidth+u;m>c?r.childNodes[d].style.width=m+"px":i.childNodes[d].style.width=c+"px"}}else e("table.body,table.foot",t).width(e("table.head").width());e("table.foot",t).width(n.width()),o.width(n.width()+o[0].offsetWidth-o[0].clientWidth+1)}var C={initRows:3,maxRowsAllowed:0,initData:null,columns:null,i18n:null,idPrefix:null,hideButtons:null,hideRowNumColumn:!1,rowButtonsInFront:!1,rowCountName:"_RowCount",buttonClasses:null,sectionClasses:null,customGridButtons:null,customRowButtons:null,customFooterButtons:null,useSubPanel:!1,maintainScroll:!1,maxBodyHeight:0,autoColumnWidth:!0,useSmallTable:!0},g={nameFormatter:null,dataLoaded:null,rowDataLoaded:null,afterRowAppended:null,afterRowInserted:null,afterRowSwapped:null,beforeRowRemove:null,afterRowRemoved:null,afterRowDragged:null,subPanelBuilder:null,subPanelGetter:null,maxNumRowsReached:null},y={type:"text",name:null,value:null,display:null,displayCss:null,displayTooltip:null,headerSpan:1,cellCss:null,ctrlAttr:null,ctrlProp:null,ctrlCss:null,ctrlClass:null,ctrlOptions:null,invisible:!1,emptyCriteria:null,customBuilder:null,customGetter:null,customSetter:null},x={noColumnInfo:"Cannot initial grid without column information!",elemNotTable:"Cannot initial grid on element other than TABLE!",notInit:"`appendGrid` does not initialized",getValueMultiGrid:"Cannot get values on multiple grid",notSupportMethod:"Method is not supported by `appendGrid`: "},O={append:"Append Row",removeLast:"Remove Last Row",insert:"Insert Row Above",remove:"Remove Current Row",moveUp:"Move Up",moveDown:"Move Down",rowDrag:"Sort Row",rowEmpty:"This Grid Is Empty"},R={append:null,removeLast:null,insert:null,remove:null,moveUp:null,moveDown:null,rowDrag:null},B={header:null,body:null,subPanel:null,footer:null},P={append:!1,removeLast:!1,insert:!1,remove:!1,moveUp:!1,moveDown:!1},N={init:function(t){var l=this;if(l.length>0){if(!e.isArray(t.columns)||0==t.columns.length)return alert(x.noColumnInfo),l;var a,u,d,m,p,f,h,w=l[0];if(c(w.tagName)||"TABLE"!=w.tagName)return alert(x.elemNotTable),l;var _=e.extend({},C,g,t);e.extend(_,{_uniqueIndex:0,_rowOrder:[],_isDataLoaded:!1,_visibleCount:0,_finalColSpan:0,_hideLastColumn:!1,_wrapperId:null,_calculateWidth:!0}),e.isPlainObject(t.i18n)?_._i18n=e.extend({},O,t.i18n):_._i18n=e.extend({},O),e.isPlainObject(t.buttonClasses)?_._buttonClasses=e.extend({},R,t.buttonClasses):_._buttonClasses=e.extend({},R),e.isPlainObject(t.sectionClasses)?_._sectionClasses=e.extend({},B,t.sectionClasses):_._sectionClasses=e.extend({},B),e.isPlainObject(t.hideButtons)?_.hideButtons=e.extend({},P,t.hideButtons):_.hideButtons=e.extend({},P),c(_.idPrefix)&&(c(w.id)||""==w.id?_.idPrefix="ag"+(new Date).getTime():_.idPrefix=w.id),e.isPlainObject(_.customGridButtons)||(_.customGridButtons={}),(u=document.createElement("thead")).className="thead-default",d=document.createElement("tbody"),m=document.createElement("tfoot"),p=document.createElement("colgroup"),_._wrapperId=_.idPrefix+"-wrapper",a=document.createElement("div"),e(a).attr("id",_._wrapperId).addClass("appendGrid").insertAfter(w),e(w).empty().appendTo(a).addClass(e.fn.appendGrid._fw.layout.table).addClass(e.fn.appendGrid.layout.table),e(w).addClass("head body foot").append(p,u,d,m);var N,G;u.appendChild(f=document.createElement("tr")),_._sectionClasses.header?f.className="columnHead "+_._sectionClasses.header:f.className="columnHead",_.hideRowNumColumn||(f.appendChild(N=document.createElement("th")),N.className="first",p.appendChild(document.createElement("col")));for(var I=0,S=0;S<_.columns.length;S++){var E=e.extend({},y,_.columns[S]);if(_.columns[S]=E,"hidden"!=_.columns[S].type)if(_.columns[S].invisible||_._visibleCount++,0==I){var F="";_.columns[S].invisible&&(F+=" invisible"),f.appendChild(h=document.createElement("th")),h.id=_.idPrefix+"_"+_.columns[S].name+"_td_head",h.className=F,_.columns[S].displayCss&&e(h).css(_.columns[S].displayCss),_.columns[S].headerSpan>1&&(e(h).attr("colSpan",_.columns[S].headerSpan),I=_.columns[S].headerSpan-1),e.isFunction(_.columns[S].display)?_.columns[S].display(h):c(_.columns[S].display)||e(h).text(_.columns[S].display),p.appendChild(document.createElement("col"))}else I--}if(_.hideButtons.insert&&_.hideButtons.remove&&_.hideButtons.moveUp&&_.hideButtons.moveDown&&(!e.isArray(_.customRowButtons)||0==_.customRowButtons.length)&&(_._hideLastColumn=!0),_._finalColSpan=_._visibleCount,_.hideRowNumColumn||_._finalColSpan++,_._hideLastColumn||_._finalColSpan++,_._hideLastColumn||(_.rowButtonsInFront?_.hideRowNumColumn?f.insertBefore(G=document.createElement("th"),f.firstChild):f.insertBefore(G=document.createElement("th"),f.childnodes[1]):f.appendChild(G=document.createElement("th")),G.className="last",G.id=_.idPrefix+"_last_td_head",p.appendChild(document.createElement("col"))),m.appendChild(f=document.createElement("tr")),_._sectionClasses.footer&&(f.className=_._sectionClasses.footer),f.appendChild(h=document.createElement("td")),h.id=_.idPrefix+"_footer_td",h.colSpan=_._finalColSpan,e("<input/>").attr({type:"hidden",id:_.idPrefix+"_rowOrder",name:_.idPrefix+"_rowOrder"}).appendTo(h),!_.hideButtons.append||!_.hideButtons.removeLast||e.isArray(_.customFooterButtons)&&0!=_.customFooterButtons.length){var D=null;if(D=e.fn.appendGrid._fw.layout.footerButtonGroup?e("<div></div>").appendTo(h).addClass(e.fn.appendGrid._fw.layout.footerButtonGroup).addClass(e.fn.appendGrid.layout.footerButtonGroup):e(h),_.hideButtons.append||v(_,"append").on("click",function(e){return n(w,1,null,null),e&&e.preventDefault&&e.preventDefault(),!1}).appendTo(D),_.hideButtons.removeLast||v(_,"removeLast").on("click",function(e){return r(w,null,this.value,!1),e&&e.preventDefault&&e.preventDefault(),!1}).appendTo(D),_.customFooterButtons&&_.customFooterButtons.length){for(k=_.customFooterButtons.length-1;k>=0;k--)(T=_.customFooterButtons[k])&&T.uiButton&&T.click&&T.atTheFront&&D.prepend(o(w,T));for(var k=0;k<_.customFooterButtons.length;k++){var T=_.customFooterButtons[k];T&&T.uiButton&&T.click&&!T.atTheFront&&D.append(o(w,T))}}}else f.style.display="none";e(w).data("appendGrid",_),e.isArray(t.initData)?s(w,t.initData,!0):e(w).appendGrid("appendRow",_.initRows),0==_._rowOrder.length&&i(a,_,!0),_.maxBodyHeight>0&&(_.autoColumnWidth?b(a):e("table.foot",a).width(e(w).width()))}return l},isReady:function(){return!!t(this,!0)},isDataLoaded:function(){var e=t(this);return!!e&&e._isDataLoaded},load:function(e){var n=this;return t(this)&&(null!=e&&e.length>0?s(n[0],e,!1):a(n[0])),n},appendRow:function(e){return this.appendGrid("insertRow",e)},insertRow:function(o,l,r){var i=t(this);if(i&&(e.isArray(o)&&o.length>0||e.isNumeric(o)&&o>0)){var a=this[0];if(insertResult=n(a,o,l,r),e.isNumeric(l)||e.isNumeric(r)){u(a,insertResult.rowIndex);var s=i._rowOrder[insertResult.addedRows[0]];e("#"+i.idPrefix+"_Insert_"+s,a).focus()}}return this},removeRow:function(e,n){var o=t(this);return o&&o._rowOrder.length>0&&r(this[0],e,n,!0),this},emptyGrid:function(){return t(this)&&a(this[0]),target},moveUpRow:function(n,o){var l=t(this),r=this;if(l){var i,a,u,s,c=r[0],p=null,f=c.getElementsByTagName("tbody")[0];e.isNumeric(n)&&n>0&&n<l._rowOrder.length?(p=n,o=l._rowOrder[n]):e.isNumeric(o)&&(p=d(o,l)),null!=p&&p>0&&(i=document.getElementById(l.idPrefix+"_Row_"+o,c),a=document.getElementById(l.idPrefix+"_Row_"+l._rowOrder[p-1],c),l.useSubPanel&&(u=document.getElementById(l.idPrefix+"_SubRow_"+o,c)),f.removeChild(i),l.useSubPanel&&f.removeChild(u),f.insertBefore(i,a),l.useSubPanel&&f.insertBefore(u,a),l._rowOrder[p]=l._rowOrder[p-1],l._rowOrder[p-1]=o,s=e("td.first",a).html(),e("td.first",a).html(e("td.first",i).html()),e("td.first",i).html(s),m(c,l),e("td.last button.moveUp",i).removeClass("ui-state-hover").blur(),e("td.last button.moveUp",a).focus(),l.afterRowSwapped&&l.afterRowSwapped(c,p,p-1))}return r},moveDownRow:function(n,o){var l=t(this),r=this;if(l){var i,a,u,s,c=r[0],p=null,f=c.getElementsByTagName("tbody")[0];e.isNumeric(n)&&n>=0&&n<l._rowOrder.length-1?(p=n,o=l._rowOrder[n]):e.isNumeric(o)&&(p=d(o,l)),null!=p&&p!=l._rowOrder.length-1&&(i=document.getElementById(l.idPrefix+"_Row_"+o,c),a=document.getElementById(l.idPrefix+"_Row_"+l._rowOrder[p+1],c),l.useSubPanel&&(u=document.getElementById(l.idPrefix+"_SubRow_"+l._rowOrder[p+1],c)),f.removeChild(a),f.insertBefore(a,i),l.useSubPanel&&f.insertBefore(u,i),l._rowOrder[p]=l._rowOrder[p+1],l._rowOrder[p+1]=o,s=e("td.first",a).html(),e("td.first",a).html(e("td.first",i).html()),e("td.first",i).html(s),m(c,l),e("td.last button.moveDown",i).removeClass("ui-state-hover").blur(),e("td.last button.moveDown",a).focus(),l.afterRowSwapped&&l.afterRowSwapped(c,p,p+1))}return r},showColumn:function(n){var o=t(this);if(o&&n){for(var l=-1,r=this[0],i=0;i<o.columns.length;i++)if(o.columns[i].name==n){l=i;break}if(-1!=l&&o.columns[l].invisible){o._visibleCount++,o._finalColSpan++,e("#"+o.idPrefix+"_caption_td").attr("colSpan",o._finalColSpan),e("#"+o.idPrefix+"_footer_td").attr("colSpan",o._finalColSpan),e("#"+o.idPrefix+"_"+n+"_td_head").removeClass("invisible");for(i=0;i<o._rowOrder.length;i++){var a=o._rowOrder[i];e("#"+o.idPrefix+"_"+n+"_td_"+a).removeClass("invisible"),o.useSubPanel&&e("#"+o.idPrefix+"_SubRow_"+a).attr("colSpan",o._visibleCount+(o._hideLastColumn?0:1))}o.columns[l].invisible=!1,m(r,o)}}return this},hideColumn:function(n){var o=t(this);if(o&&n){for(var l=-1,r=this[0],i=0;i<o.columns.length;i++)if(o.columns[i].name==n){l=i;break}if(-1!=l&&!o.columns[l].invisible){o._visibleCount--,o._finalColSpan--,e("#"+o.idPrefix+"_caption_td").attr("colSpan",o._finalColSpan),e("#"+o.idPrefix+"_footer_td").attr("colSpan",o._finalColSpan),e("#"+o.idPrefix+"_"+n+"_td_head").addClass("invisible");for(i=0;i<o._rowOrder.length;i++){var a=o._rowOrder[i];e("#"+o.idPrefix+"_"+n+"_td_"+a).addClass("invisible"),o.useSubPanel&&e("#"+o.idPrefix+"_SubRow_"+a).attr("colSpan",o._visibleCount+(o._hideLastColumn?0:1))}o.columns[l].invisible=!0,m(r,o)}}return this},isColumnInvisible:function(e){var n=t(this);if(n&&e)for(var o=0;o<n.columns.length;o++)if(n.columns[o].name==e)return n.columns[o].invisible;return null},getRowCount:function(){var e=t(this);return e?e._rowOrder.length:null},getUniqueIndex:function(n){var o=t(this);return o&&e.isNumeric(n)&&n<o._rowOrder.length?o._rowOrder[n]:null},getRowIndex:function(n){var o=t(this);if(o&&e.isNumeric(n))for(var l=0;l<o._rowOrder.length;l++)if(o._rowOrder[l]==n)return l;return null},getRowValue:function(n,o,l){var r=t(this),i=null;return r&&(e.isNumeric(n)&&n>=0&&n<r._rowOrder.length&&(o=r._rowOrder[n]),c(o)||(i=p(r,o,l))),i},getAllValue:function(n){var o=t(this),l=null;if(o){l=n?{}:[];for(var r=0;r<o._rowOrder.length;r++)n?(rowValue=p(o,o._rowOrder[r],r),e.extend(l,rowValue)):(rowValue=p(o,o._rowOrder[r]),l.push(rowValue));n&&(l[o.rowCountName]=o._rowOrder.length)}return l},getCtrlValue:function(e,n){var o=t(this);if(o&&n>=0&&n<o._rowOrder.length)for(var l=0;l<o.columns.length;l++)if(o.columns[l].name===e)return f(o,l,o._rowOrder[n]);return null},setCtrlValue:function(e,n,o){var l=t(this);if(l&&n>=0&&n<l._rowOrder.length)for(var r=0;r<l.columns.length;r++)if(l.columns[r].name==e){w(l,r,l._rowOrder[n],o);break}return this},getCellCtrl:function(e,n){var o=t(this);if(o&&n>=0&&n<o._rowOrder.length)for(var l=o._rowOrder[n],r=0;r<o.columns.length;r++)if(o.columns[r].name===e)return h(o.columns[r].type,o.idPrefix,e,l);return null},getCellCtrlByUniqueIndex:function(e,n){var o=t(this);if(o)for(var l=0;l<o.columns.length;l++)if(o.columns[l].name===e)return h(o.columns[l].type,o.idPrefix,e,n);return null},getRowOrder:function(){var e=t(this);return e?e._rowOrder.slice():null},getColumns:function(){var e=t(this);return e?e.columns.slice():null},isRowEmpty:function(e){var n=t(this);return n?_(n,e):null},removeEmptyRows:function(){var e=t(this);if(e){for(var n=this[0],o=e._rowOrder.length;o>=0;o--)_(e,o)&&r(n,null,e._rowOrder[o],!0);return this}return null}};e.fn.appendGrid=function(e){return N[e]?N[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void alert(x.notSupportMethod+e):N.init.apply(this,arguments)}}(jQuery),$.fn.appendGrid&&($.fn.appendGrid._fw={layout:{table:"table",thead:"",theadRow:"",theadCell:"",theadCellFirst:"",theadCellLast:"",tbody:"",tbodyRow:"",tbodyCell:"",tbodyCellFirst:"",tbodyCellLast:"",tfoot:"",tfootRow:"",tfootCell:"",rowButtonGroup:"btn-group",footerButtonGroup:"btn-group",button:"btn",buttonIcon:null},builders:{button:function(e,t){var n=null,o=null;t&&($.isPlainObject(t)?(n=t.icon,o=t.buttonClass):"string"==typeof t&&(n=t));var l=$("<button/>").attr("type","button").addClass($.fn.appendGrid._fw.layout.button).addClass(o||$.fn.appendGrid.layout.button),r=$.fn.appendGrid._fw.builders.icon(e,n);return r&&r.appendTo(l),l},icon:null}},$.fn.appendGrid.layout={table:"table-sm",thead:"",theadRow:"",theadCell:"",theadCellFirst:"",theadCellLast:"",tbody:"",tbodyRow:"",tbodyCell:"",tbodyCellFirst:"",tbodyCellLast:"",tfoot:"",tfootRow:"",tfootCell:"",rowButtonGroup:"btn-group-sm",footerButtonGroup:"btn-group-sm",button:"btn-outline-secondary",buttonIcon:null}),$.fn.appendGrid._fw.layout.buttonIcon="octicon",$.fn.appendGrid._fw.builders.icon=function(e,t){var n=null;if(t)n=t;else switch(e){case"append":n="octicon-plus";break;case"removeLast":n="octicon-dash";break;case"insert":n="octicon-reply";break;case"remove":n="octicon-trashcan";break;case"moveUp":n="octicon-arrow-up";break;case"moveDown":n="octicon-arrow-down"}return $("<span></span>").addClass($.fn.appendGrid._fw.layout.buttonIcon).addClass(n)};